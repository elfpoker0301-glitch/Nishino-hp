<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>お知らせ一覧 | 株式会社ニシボ</title>
    <meta name="description" content="株式会社ニシボの最新お知らせ一覧。会社からの重要なお知らせや施工情報をお届けします。">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Exo+2:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- ヘッダー -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <img src="images/nishibo-logo.svg" alt="株式会社ニシボ ロゴ">
                    <a href="index.html">NISHIBO</a>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a href="about.html" class="nav-link">会社概要</a>
                    </li>
                    <li class="nav-item">
                        <a href="greeting.html" class="nav-link">代表挨拶</a>
                    </li>
                    <li class="nav-item">
                        <a href="index.html#services" class="nav-link">事業案内</a>
                    </li>
                    <li class="nav-item">
                        <a href="works.html" class="nav-link">工事実績</a>
                    </li>
                    <li class="nav-item">
                        <a href="branches.html" class="nav-link">支店情報</a>
                    </li>
                    <li class="nav-item">
                        <a href="recruit.html" class="nav-link">採用情報</a>
                    </li>
                    <li class="nav-item">
                        <a href="index.html#contact" class="nav-link">お問い合わせ</a>
                    </li>
                </ul>
                <div class="nav-toggle" id="mobile-menu">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- メインコンテンツ -->
    <main class="main">
        <!-- ページヒーロー -->
        <section class="page-hero">
            <div class="container">
                <div class="page-hero-content">
                    <h1 class="page-title">お知らせ一覧</h1>
                    <p class="page-subtitle">株式会社ニシボからの最新情報</p>
                </div>
            </div>
        </section>

        <!-- フィルター -->
        <section class="news-filter">
            <div class="container">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">すべて</button>
                    <button class="filter-btn" data-filter="info">お知らせ</button>
                    <button class="filter-btn" data-filter="work">施工情報</button>
                    <button class="filter-btn" data-filter="important">重要</button>
                </div>
            </div>
        </section>

        <!-- お知らせ一覧 -->
        <section class="news-list-section">
            <div class="container">
                <div class="news-grid" id="news-grid">
                    <!-- 動的に生成されるコンテンツ -->
                    <div class="no-news-found" id="no-news-found" style="display: none;">
                        <p>該当するお知らせがありません。</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- フッター -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <h3>Nishibo</h3>
                        <p>株式会社ニシボ</p>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>事業案内</h4>
                    <ul class="footer-links">
                        <li><a href="index.html#services">ダイヤモンドコア工事</a></li>
                        <li><a href="index.html#services">アンカー工事</a></li>
                        <li><a href="index.html#services">非破壊検査</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>会社情報</h4>
                    <ul class="footer-links">
                        <li><a href="about.html">会社概要</a></li>
                        <li><a href="greeting.html">代表挨拶</a></li>
                        <li><a href="branches.html">支店情報</a></li>
                        <li><a href="privacy.html">プライバシーポリシー</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>お問い合わせ</h4>
                    <div class="footer-contact">
                        <p><strong>本社</strong></p>
                        <p>〒811-1311<br>福岡県福岡市南区横手3丁目39-19</p>
                        <p>TEL: 092-592-6533<br>FAX: 092-592-6534</p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Nishibo Corporation. All rights reserved. | <a href="privacy.html">プライバシーポリシー</a></p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/script.js"></script>
    <script>
        // お知らせ一覧の動的読み込み
        document.addEventListener('DOMContentLoaded', function() {
            // サンプルデータを初期化
            initializeSampleDataForNews();
            loadAllNews();
            initializeNewsFilter();
        });

        // サンプルデータの初期化
        function initializeSampleDataForNews() {
            if (!localStorage.getItem('news')) {
                const sampleNews = [
                    {
                        id: 1,
                        title: 'ホームページをリニューアルしました',
                        category: 'info',
                        content: '株式会社ニシボのホームページを全面リニューアルいたしました。より見やすく、使いやすいデザインに変更し、お客様により良い情報をお届けできるよう改善いたしました。',
                        date: '2024-01-15'
                    },
                    {
                        id: 2,
                        title: '大型商業施設のダイヤモンドコア工事を受注',
                        category: 'work',
                        content: '東京都内の大型商業施設におけるダイヤモンドコア工事を受注いたしました。施工面積200箇所、工期30日間の大規模プロジェクトとなります。',
                        date: '2024-01-10'
                    },
                    {
                        id: 3,
                        title: '年末年始休業のお知らせ',
                        category: 'important',
                        content: '誠に勝手ながら、12月29日から1月3日まで年末年始休業とさせていただきます。1月4日より通常営業いたします。ご不便をおかけしますが、何卒ご理解のほどよろしくお願いいたします。',
                        date: '2023-12-25'
                    },
                    {
                        id: 4,
                        title: '新技術導入のお知らせ',
                        category: 'info',
                        content: '最新のレーザー測定技術を導入し、より高精度な施工が可能になりました。これにより作業効率と品質の向上を実現いたします。',
                        date: '2023-12-15'
                    },
                    {
                        id: 5,
                        title: '橋梁点検業務完了報告',
                        category: 'work',
                        content: 'さいたま市からの委託による主要橋梁5箇所の定期点検業務が完了いたしました。全箇所において安全性に問題のないことを確認いたしました。',
                        date: '2023-12-01'
                    }
                ];
                localStorage.setItem('news', JSON.stringify(sampleNews));
            }
        }

        function loadAllNews() {
            const newsGrid = document.getElementById('news-grid');
            const noNewsFound = document.getElementById('no-news-found');
            const newsData = JSON.parse(localStorage.getItem('news') || '[]');
            
            // 既存のニュースアイテムを削除
            const existingItems = newsGrid.querySelectorAll('.news-card');
            existingItems.forEach(item => item.remove());
            
            if (newsData.length === 0) {
                noNewsFound.style.display = 'block';
                return;
            }
            
            noNewsFound.style.display = 'none';
            
            // お知らせを日付順にソート（新しい順）
            const sortedNews = newsData.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // お知らせアイテムを生成
            sortedNews.forEach((news, index) => {
                const newsCard = createNewsCard(news);
                newsGrid.insertBefore(newsCard, noNewsFound);
                
                // アニメーション遅延
                setTimeout(() => {
                    newsCard.style.opacity = '1';
                    newsCard.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        function createNewsCard(news) {
            const newsCard = document.createElement('div');
            newsCard.className = 'news-card';
            newsCard.setAttribute('data-category', news.category);
            newsCard.style.opacity = '0';
            newsCard.style.transform = 'translateY(20px)';
            newsCard.style.transition = 'all 0.6s ease';
            
            newsCard.innerHTML = `
                <div class="news-card-header">
                    <div class="news-card-date">${formatDate(news.date)}</div>
                    <div class="news-card-category category-${news.category}">${getCategoryName(news.category)}</div>
                </div>
                <div class="news-card-body">
                    <h3 class="news-card-title">${news.title}</h3>
                    <p class="news-card-content">${news.content}</p>
                </div>
            `;
            
            return newsCard;
        }

        function initializeNewsFilter() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.getAttribute('data-filter');
                    
                    // アクティブボタンの切り替え
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // アイテムの表示/非表示
                    filterNewsItems(filter);
                });
            });
        }

        function filterNewsItems(filter) {
            const newsCards = document.querySelectorAll('.news-card');
            let visibleCount = 0;
            
            newsCards.forEach((card, index) => {
                const category = card.getAttribute('data-category');
                
                if (filter === 'all' || category === filter) {
                    card.style.display = 'block';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, visibleCount * 50);
                    visibleCount++;
                } else {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 300);
                }
            });

            // 該当なしメッセージの表示制御
            const noNewsFound = document.getElementById('no-news-found');
            if (visibleCount === 0) {
                noNewsFound.style.display = 'block';
            } else {
                noNewsFound.style.display = 'none';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}.${month}.${day}`;
        }

        function getCategoryName(category) {
            const categories = {
                'info': 'お知らせ',
                'work': '施工情報',
                'important': '重要'
            };
            return categories[category] || category;
        }
    </script>
</body>
</html>